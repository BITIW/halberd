# RAMP — Rust Address Messaging Protocol

>RAMP (**R**ust **A**ddress **M**essaging **P**rotocol) — >это self-hosted децентрализованный протокол обмена >сообщениями (электронной почтой нового поколения), >полностью написанный на Rust.
>
>>Inspired by SHARP, but reimplemented from scratch in Rust.

Безопасная авторизация на BLAKE3, никакого JWT.

Упор на простоту, надёжность и независимость.

## Кратко о RAMP

- Использует адреса вида: user#domain.com

- Не требует внешних сервисов: всё работает на вашем сервере

- DNS discovery через SRV-записи (_ramp._tcp.domain.com)

- Все сообщения идут через TCP по простому бинарному протоколу (protobuf)

- Сервера идентифицируются доменом и BLAKE3-подписанным токеном

>Пример запуска сервера(в далеком будущем)
>```shell
>cd new_rs/halberd
>cargo build --release
>./target/release/halberd
>```

- Сервер стартует на порту, заданном в конфиге (по умолчанию 5000).

- DNS конфиг (Cloudflare или любой другой провайдер)

>Добавьте SRV-запись:
>
>>_ramp._tcp.yourdomain.com. 86400 IN SRV 1 1 5000 ramp.yourdomain.com.
>
>И A-запись для ramp.yourdomain.com → ваш IP.

## Протокол

Пример рукопожатия (protobuf-сообщения, см. proto/halberd.proto):

1. Клиент: HELLO (с доменом и версией)

2. Сервер: OK (или ERROR)

3. Клиент: MAIL_TO (кому отправить)

4. Сервер: OK

5. Клиент: DATA → EMAIL_CONTENT → END_DATA

6. Сервер: OK (или ERROR)

**Всё подписывается и защищается токеном с BLAKE3.**

## Аутентификация

Авторизация по токену (выдаётся при логине, хранится на клиенте)

Токен — короткая строка вида: user_id|expires|nonce|blake3sig

Нет JWT и устаревшей крипты(Sha256 и подобной)

## TODO/Planned

- API для фронта (WebSocket, REST)

- UI на Rust/WASM (Dioxus/Yew)

- Интеграция с MariaDB (или SQLite)

- Расширяемые антиспам-фичи

- Federation (несколько серверов на разных доменах)

## Запуск тестового клиента

>В сборке уже есть простейший клиент (можно отправлять тестовые письма локально).

Для реального использования потребуется завести SRV-запись и выдать себе токен.

## Миграция с SHARP

RAMP использует ту же схему адресации (user#domain), но весь код переписан на Rust для оптимизаций.

Авторизация и структура протокола улучшены.

Совместимость с SHARP совершенно не гарантируется.

## Лицензия

MIT (как и оригинальный SHARP, полный текст в LICENSE)

### **Автор: BITIW**
>RAMP — не просто новая почта. Это новая парадигма. Ты можешь её форкнуть, улучшить, и никто не помешает тебе быть самостоятельным.

>Inspired by Twoblade/SHARP, but 100% Rust-powered.